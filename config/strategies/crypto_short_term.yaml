# Crypto Short-Term Strategy Configuration
# Tailored for 24/7 high-volatility assets (BTC, ETH, etc.)
#
# Key differences from stocks:
# - Higher FLAT threshold (±2%) — crypto moves more than stocks
# - More trees with deeper depth — captures non-linear crypto patterns
# - Shorter walk-forward windows — crypto regimes shift faster
# - 365 trading days — no weekends/holidays
# - Weekend/time-of-week features enabled

strategy:
  name: "crypto_short_term"
  display_name: "Crypto Short-Term (1-5 Days)"

  # Prediction horizons
  horizon_days: [1, 3, 5]
  default_horizon: 1

  # Label configuration — wider FLAT zone for crypto volatility
  label_type: "classification"
  num_classes: 3
  threshold: 0.02               # ±2% threshold (crypto is ~2x more volatile than stocks)

  # Feature modules
  features:
    - technical
    - returns
    - market_adaptive            # Phase 3: crypto-specific features
    - sentiment

  # Model configuration — deeper trees for complex crypto patterns
  model:
    type: "xgboost_classifier"
    hyperparameters:
      max_depth: 8               # Deeper (crypto has complex non-linear patterns)
      n_estimators: 400          # More trees
      learning_rate: 0.03        # Slower learning (compensates for deeper trees)
      subsample: 0.7             # More regularization (crypto is noisy)
      colsample_bytree: 0.7
      min_child_weight: 5        # Higher (prevent overfitting to noise)
      gamma: 0.2                 # Higher split penalty
      reg_alpha: 0.5             # Stronger L1 (sparsity)
      reg_lambda: 2.0            # Stronger L2 (ridge)
      random_state: 42
      n_jobs: -1
      eval_metric: "mlogloss"

  # Ensemble (Phase 3) — combine XGBoost + LightGBM
  ensemble:
    enabled: true
    models:
      - type: "xgboost_classifier"
        weight: 0.5
      - type: "lightgbm_classifier"
        weight: 0.5

  lookback_days: 60

  # Walk-forward — shorter windows (crypto regime shifts faster)
  validation:
    method: "walk_forward"
    initial_train_days: 365      # 1 year (not 2 — crypto regimes change fast)
    test_days: 14                # 2 weeks
    step_days: 14
    min_train_samples: 300

  data:
    years_of_history: 4          # Less history (crypto pre-2020 is different market)
    min_data_points: 500
    max_missing_pct: 0.02

  feature_selection:
    method: "importance"
    max_features: 18             # Slightly more (extra market_adaptive features)
    min_importance: 0.005

  # Crypto-specific adaptive feature settings
  market_adaptive:
    weekend_effects: true        # Sat/Sun behavior features
    hour_of_day: false           # Daily data — not applicable
    volatility_regime: true      # BTC vol regime detection
    correlation_features: true   # Correlation with BTC benchmark
    volume_spike_multiplier: 3.0 # 3x avg = spike (crypto has more volume noise)

  retrain_frequency: "daily"     # Crypto moves fast → retrain more often
